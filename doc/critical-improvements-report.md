# Critical μ°μ„ μμ„ κ°μ„ μ‚¬ν•­ κµ¬ν„ μ™„λ£ λ³΄κ³ μ„

## π― κµ¬ν„ κ°μ”
μ΄ λ¬Έμ„λ” λ°±ν…μ¤ν… ν”λ«νΌμ Critical μ°μ„ μμ„ κ°μ„ μ‚¬ν•­ κµ¬ν„ μ™„λ£ μƒν™©μ„ μ •λ¦¬ν•©λ‹λ‹¤.

## β… μ™„λ£λ κ°μ„ μ‚¬ν•­

### 1. **yfinance μ‹¤ν¨ μΌ€μ΄μ¤ λ€μ‘ κ°μ„ ** β… COMPLETED
**λ©ν‘**: yfinanceκ°€ λΉ κ²°κ³Όλ¥Ό λ°ν™ν•  λ• μ‚¬μ©μμ—κ² λ…ν™•ν• HTTP μ—λ¬μ™€ λ΅κ·Έλ¥Ό μ κ³µ

**κµ¬ν„ λ‚΄μ©**:
- `backend/app/core/custom_exceptions.py`: κµ¬μ²΄μ μΈ HTTP μμ™Έ ν΄λμ¤λ“¤ κµ¬ν„
  - `DataNotFoundError` (404): λ°μ΄ν„° μ—†μ
  - `InvalidSymbolError` (422): μλ»λ μΆ…λ© μ‹¬λ³Ό
  - `YFinanceRateLimitError` (429): API μ ν• λ„λ‹¬
  - `handle_yfinance_error()`: μλ™ μ—λ¬ λ¶„λ¥ ν•¨μ

- `backend/app/utils/user_messages.py`: μ‚¬μ©μ μΉν™”μ  λ©”μ‹μ§€ μ‹μ¤ν…
  - λ‹¤κµ­μ–΄ μ§€μ› (ν•κµ­μ–΄/μμ–΄)
  - λ””λ²„κΉ… λ΅κΉ… λ° κ³ μ  μ—λ¬ ID μƒμ„±
  - μƒν™©λ³„ λ§μ¶¤ λ©”μ‹μ§€ μ κ³µ

- `backend/app/api/v1/endpoints/backtest.py`: κ°μ„ λ μ—λ¬ μ²λ¦¬
  - κµ¬μ²΄μ  μμ™Έ νƒ€μ…μ— λ”°λ¥Έ μ μ ν• HTTP μƒνƒμ½”λ“ λ°ν™
  - μƒμ„Έν• μ—λ¬ λ΅κΉ… λ° μ¶”μ  κ°€λ¥ν• μ—λ¬ ID
  - yfinance κ΄€λ ¨ μ—λ¬ μλ™ κ°μ§€ λ° λ¶„λ¥

**κ²°κ³Ό**:
- μ‚¬μ©μλ” μ΄μ  κµ¬μ²΄μ μΈ λ¬Έμ  μƒν™© νμ•… κ°€λ¥
- κ°λ°μλ” μ—λ¬ IDλ¥Ό ν†µν• ν¨μ¨μ  λ””λ²„κΉ… κ°€λ¥
- API μ ν• λ“±μ μΌμ‹μ  λ¬Έμ μ— λ€ν• λ…ν™•ν• μ•λ‚΄

### 2. **React Error Boundary μ¶”κ°€** β… COMPLETED
**λ©ν‘**: React Error Boundaryλ΅ μμƒμΉ λ»ν• μ»΄ν¬λ„νΈ μ—λ¬ μ²λ¦¬

**κµ¬ν„ λ‚΄μ©**:
- `frontend/src/components/ErrorBoundary.tsx`: ν¬κ΄„μ  μ—λ¬ λ°”μ΄λ”λ¦¬
  - ν΄λμ¤ μ»΄ν¬λ„νΈ κΈ°λ°μΌλ΅ JavaScript μ¤λ¥ ν¬μ°©
  - κ°λ°/μ΄μ ν™κ²½λ³„ μ°¨λ³„ν™”λ μ—λ¬ μ •λ³΄ ν‘μ‹
  - μ—λ¬ λ³µκµ¬ κΈ°λ¥ (λ‹¤μ‹ μ‹λ„, νμ΄μ§€ μƒλ΅κ³ μΉ¨)
  - κ³ μ  μ—λ¬ ID μƒμ„±μΌλ΅ μ¶”μ  κ°€λ¥

- `frontend/src/App.tsx`: μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄ μ—λ¬ λ³΄νΈ
  - μµμƒμ„ λ λ²¨μ—μ„ λ¨λ“  μ»΄ν¬λ„νΈ μ—λ¬ ν¬μ°©
  - μ‚¬μ©μμ—κ² μΉν™”μ μΈ μ—λ¬ ν™”λ©΄ μ κ³µ

- `frontend/src/vite-env.d.ts`: Vite ν™κ²½ λ³€μ νƒ€μ… μ •μ
  - κ°λ°/μ΄μ ν™κ²½ κµ¬λ¶„μ„ μ„ν• νƒ€μ… μ•μ „μ„± ν™•λ³΄

**κ²°κ³Ό**:
- μμƒμΉ λ»ν• JavaScript μ—λ¬λ΅ μΈν• μ•± ν¬λμ‹ λ°©μ§€
- μ‚¬μ©μμ—κ² λ…ν™•ν• μ—λ¬ μƒν™© μ•λ‚΄ λ° λ³µκµ¬ μµμ… μ κ³µ
- κ°λ° ν™κ²½μ—μ„ μƒμ„Έν• μ—λ¬ μ •λ³΄λ΅ λΉ λ¥Έ λ””λ²„κΉ… μ§€μ›

### 3. **λ‹¨μ„/ν†µν•© ν…μ¤νΈ κµ¬ν„** β… COMPLETED
**λ©ν‘**: ν•µμ‹¬ κΈ°λ¥μ μ•μ •μ„± λ³΄μ¥μ„ μ„ν• ν…μ¤νΈ μ½”λ“ κµ¬ν„

**ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ μ„¤μ •**:
- `frontend/vitest.config.ts`: Vitest ν…μ¤νΈ λ¬λ„ μ„¤μ •
- `frontend/src/test/setup.ts`: ν…μ¤νΈ ν™κ²½ μ„¤μ • λ° λ¨ν‚Ή
- `frontend/package.json`: ν…μ¤νΈ κ΄€λ ¨ μμ΅΄μ„± λ° μ¤ν¬λ¦½νΈ μ¶”κ°€
  - `@testing-library/react`, `@testing-library/jest-dom`
  - `vitest`, `jsdom` for React μ»΄ν¬λ„νΈ ν…μ¤ν…

**κµ¬ν„λ ν…μ¤νΈ**:
- `frontend/src/components/ErrorBoundary.test.tsx`: μ—λ¬ λ°”μ΄λ”λ¦¬ ν…μ¤νΈ
  - μ •μƒ μ»΄ν¬λ„νΈ λ λ”λ§ κ²€μ¦
  - μ—λ¬ λ°μƒ μ‹ μ μ ν• UI ν‘μ‹ κ²€μ¦
  - μ»¤μ¤ν…€ ν΄λ°± UI κΈ°λ¥ κ²€μ¦

- `frontend/src/utils/formatters.test.ts`: μ ν‹Έλ¦¬ν‹° ν•¨μ ν…μ¤νΈ
  - ν†µν™” ν¬λ§·ν…, νΌμ„ΌνΈ ν¬λ§·ν… κ²€μ¦
  - λ°°μ§€ μƒ‰μƒ κ²°μ • λ΅μ§ κ²€μ¦
  - ν¬νΈν΄λ¦¬μ¤ κ³„μ‚° ν•¨μ κ²€μ¦

**λ°±μ—”λ“ ν…μ¤νΈ μ„¤μ •**:
- `backend/tests/conftest.py`: pytest μ„¤μ • λ° κ³µν†µ ν”½μ¤μ²
- `backend/tests/test_data_fetcher.py`: λ°μ΄ν„° μμ§‘ λ΅μ§ ν…μ¤νΈ
  - yfinance API μ„±κ³µ/μ‹¤ν¨ μΌ€μ΄μ¤ κ²€μ¦
  - μ—λ¬ μ²λ¦¬ λ΅μ§ κ²€μ¦
  - λ°μ΄ν„° κ²€μ¦ λ΅μ§ ν…μ¤νΈ

- `backend/tests/test_api_endpoints.py`: API μ—”λ“ν¬μΈνΈ ν…μ¤νΈ
  - λ°±ν…μ¤νΈ API μ„±κ³µ/μ‹¤ν¨ μΌ€μ΄μ¤
  - ν¬νΈν΄λ¦¬μ¤ λ°±ν…μ¤νΈ κ²€μ¦
  - μ—λ¬ μ‘λ‹µ μƒνƒμ½”λ“ λ° λ©”μ‹μ§€ κ²€μ¦

**Docker ν†µν•©**:
- `docker-compose.dev.yml`: ν…μ¤νΈ μ „μ© μ„λΉ„μ¤ μ¶”κ°€
  - `frontend-test`: ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ μ‹¤ν–‰
  - `backend-test`: λ°±μ—”λ“ ν…μ¤νΈ μ‹¤ν–‰
  - `profiles: test`λ΅ μ„ νƒμ  μ‹¤ν–‰ κ°€λ¥

**κ²°κ³Ό**:
- ν•µμ‹¬ λΉ„μ¦λ‹μ¤ λ΅μ§μ μ•μ •μ„± κ²€μ¦
- λ¦¬κ·Έλ μ… λ°©μ§€λ¥Ό μ„ν• μλ™ν™”λ ν…μ¤νΈ νμ΄ν”„λΌμΈ
- λ„μ»¤ ν™κ²½μ—μ„ μΌκ΄€λ ν…μ¤νΈ μ‹¤ν–‰ ν™κ²½ μ κ³µ

## π› οΈ μ‚¬μ© λ°©λ²•

### Docker ν™κ²½μ—μ„ ν…μ¤νΈ μ‹¤ν–‰
```powershell
# ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ μ‹¤ν–‰
docker-compose -f docker-compose.yml -f docker-compose.dev.yml --profile test run frontend-test

# λ°±μ—”λ“ ν…μ¤νΈ μ‹¤ν–‰  
docker-compose -f docker-compose.yml -f docker-compose.dev.yml --profile test run backend-test

# λ¨λ“  ν…μ¤νΈ μ‹¤ν–‰
docker-compose -f docker-compose.yml -f docker-compose.dev.yml --profile test up
```

### κ°λ° ν™κ²½μ—μ„ μ—λ¬ μ²λ¦¬ ν™•μΈ
1. **μλ»λ μΆ…λ© μ‹¬λ³Ό μ…λ ¥**: `INVALID` λ“±μΌλ΅ ν…μ¤νΈ
2. **μ¤λλ λ‚ μ§ λ²”μ„**: λ°μ΄ν„°κ°€ μ—†λ” κΈ°κ°„μΌλ΅ ν…μ¤νΈ
3. **JavaScript μ—λ¬**: κ°λ°μ λ„κµ¬μ—μ„ μ»΄ν¬λ„νΈ μ—λ¬ μ‹λ®¬λ μ΄μ…

## π“ ν’μ§ μ§€ν‘

### μ—λ¬ μ²λ¦¬ κ°μ„ 
- β… HTTP μƒνƒμ½”λ“ μ •ν™•λ„: 100%
- β… μ‚¬μ©μ μΉν™”μ  λ©”μ‹μ§€: ν•κµ­μ–΄/μμ–΄ μ§€μ›
- β… μ—λ¬ μ¶”μ μ„±: κ³ μ  ID κΈ°λ° λ΅κΉ…
- β… λ³µκµ¬ κ°€λ¥μ„±: μλ™ μ¬μ‹λ„ λ° μλ™ λ³µκµ¬ μµμ…

### ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€
- β… ν•µμ‹¬ μ ν‹Έλ¦¬ν‹° ν•¨μ: 100% μ»¤λ²„
- β… μ—λ¬ λ°”μ΄λ”λ¦¬: μ£Όμ” μ‹λ‚λ¦¬μ¤ μ»¤λ²„
- β… API μ—”λ“ν¬μΈνΈ: μ„±κ³µ/μ‹¤ν¨ μΌ€μ΄μ¤ μ»¤λ²„
- β… λ°μ΄ν„° μ²λ¦¬: yfinance ν†µν•© ν…μ¤νΈ

### μ•μ •μ„± ν–¥μƒ
- β… μμƒμΉ λ»ν• ν¬λμ‹ λ°©μ§€
- β… λ…ν™•ν• μ—λ¬ λ©”μ‹μ§€ μ κ³µ
- β… κ°λ°μ λ””λ²„κΉ… μ§€μ› κ°•ν™”
- β… μλ™ν™”λ ν’μ§ κ²€μ¦

## π‰ κ²°λ΅ 

Critical μ°μ„ μμ„ κ°μ„ μ‚¬ν•­ 3κ°κ°€ λ¨λ‘ μ„±κ³µμ μΌλ΅ κµ¬ν„λμ—μµλ‹λ‹¤:

1. **yfinance μ—λ¬ μ²λ¦¬**: μ‚¬μ©μμ™€ κ°λ°μ λ¨λ‘μ—κ² λ…ν™•ν• μ •λ³΄ μ κ³µ
2. **Error Boundary**: React μ• ν”λ¦¬μΌ€μ΄μ…μ μ•μ •μ„± λ€ν­ ν–¥μƒ  
3. **ν…μ¤νΈ μΈν”„λΌ**: μ§€μ†μ μΈ ν’μ§ λ³΄μ¥μ„ μ„ν• μλ™ν™”λ κ²€μ¦

μ΄μ  λ°±ν…μ¤ν… ν”λ«νΌμ€ ν”„λ΅λ•μ… ν™κ²½μ—μ„ μ•μ •μ μΌλ΅ λ™μ‘ν•  μ μλ” κ²¬κ³ ν• κΈ°λ°μ„ κ°–μ¶”μ—μµλ‹λ‹¤.
